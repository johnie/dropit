/*!
 * dropit
 * A super-small, non-dependent JavaScript framework that allows you to easily customize selectboxes
 * https://github.com/johnie/dropit#readme
 * @author Johnie Hjelm <johnie@hjelm.im>
 * @version 1.0.0
 * Copyright 2015. MIT licensed.
 */
var Dropit=Dropit||function(t,e){if(!("ontouchstart"in window)){this.selector=t||"select",this.settings=e||{},this.settings.hiddenSelectClass=this.settings.hiddenSelectClass||"hidden",this.settings.dropitClass=this.settings.dropitClass||"custom",this.settings.activeListClass=this.settings.activeListClass||"active",this.settings.selectedOptionClass=this.settings.selectedOptionClass||"selected",this.originalSelects=[],this.originalOptions=[],this.selectButtons=[],this.selectLists=[],this.selectOptions=[];var s=function(){for(var t=document.querySelectorAll(this.selector),e=0,s=t.length;s>e;e++)this.create(t.item(e),e)}.bind(this);"complete"==document.readyState||"interactive"==document.readyState?s():document.addEventListener("DOMContentLoaded",s)}};Dropit.prototype={create:function(t,e){this.originalSelects.push(t),this.originalOptions.push(t.querySelectorAll("option"));var s=t.querySelector("[selected]")||this.originalOptions[e].item(0),i=Array.prototype.indexOf.call(this.originalOptions[e],s),n=function(){var t=document.createElement("button");t.textContent=s.textContent,t.className=this.settings.dropitClass,t.addEventListener("click",function(t){t.preventDefault(),this.toggle(e)}.bind(this)),this.selectButtons.push(t)},l=function(){var t=document.createElement("ul");t.className=this.settings.dropitClass,this.selectLists.push(t),this.selectOptions.push([]),o.call(this)},o=function(){var t=this;[].forEach.call(t.originalOptions[e],function(n,l){var o=n.textContent,c=document.createElement("li");l==i&&(c.className=t.settings.selectedOptionClass),s.setAttribute("selected","selected"),t.selectOptions[e].push(c),c.textContent=o,c.addEventListener("click",function(s){t.selectOption(s.target,e)}),t.selectLists[e].appendChild(c)})},c=function(){var s=t.parentNode;s.insertBefore(this.selectButtons[e],t),s.insertBefore(this.selectLists[e],t),t.classList.add(this.settings.hiddenSelectClass)};n.call(this),l.call(this),c.call(this)},toggle:function(t){var e=this.settings.activeListClass,s=this.selectLists[t],i=this.selectButtons[t],n=function(t){"keyup"==t.type&&27!=t.keyCode||t.target==i||o()},l=function(){s.style.left=i.offsetLeft+"px",s.style.top=i.offsetTop+"px",s.classList.add(e),document.addEventListener("click",n),document.addEventListener("keyup",n)},o=function(){s.classList.remove(e),document.removeEventListener("click",n),document.removeEventListener("keyup",n)};s.classList.contains(e)?o():l()},selectOption:function(t,e){this.originalSelects[e].querySelector("[selected]").removeAttribute("selected"),this.originalOptions[e].item(this.selectOptions[e].indexOf(t)).setAttribute("selected","selected"),this.selectButtons[e].textContent=t.textContent,this.selectLists[e].querySelector("."+this.settings.selectedOptionClass).classList.remove(this.settings.selectedOptionClass),t.className=this.settings.selectedOptionClass}};