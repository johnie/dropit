var CustomSelect=CustomSelect||function(a,b){if(!("ontouchstart"in window)){this.selector=a||"select",this.settings=b||{},this.settings.hiddenSelectClass=this.settings.hiddenSelectClass||"hidden",this.settings.customSelectClass=this.settings.customSelectClass||"custom",this.settings.activeListClass=this.settings.activeListClass||"active",this.settings.selectedOptionClass=this.settings.selectedOptionClass||"selected",this.originalSelects=[],this.originalOptions=[],this.selectButtons=[],this.selectLists=[],this.selectOptions=[];var c=function(){for(var a=document.querySelectorAll(this.selector),b=0,c=a.length;c>b;b++)this.create(a.item(b),b)}.bind(this);"complete"==document.readyState||"interactive"==document.readyState?c():document.addEventListener("DOMContentLoaded",c)}};CustomSelect.prototype={create:function(a,b){this.originalSelects.push(a),this.originalOptions.push(a.querySelectorAll("option"));var c=a.querySelector("[selected]")||this.originalOptions[b].item(0),d=Array.prototype.indexOf.call(this.originalOptions[b],c),e=function(){var a=document.createElement("button");a.textContent=c.textContent,a.className=this.settings.customSelectClass,a.addEventListener("click",function(a){a.preventDefault(),this.toggle(b)}.bind(this)),this.selectButtons.push(a)},f=function(){var a=document.createElement("ul");a.className=this.settings.customSelectClass,this.selectLists.push(a),this.selectOptions.push([]),g.call(this)},g=function(){var a=this;[].forEach.call(a.originalOptions[b],function(e,f){var g=e.textContent,h=document.createElement("li");f==d&&(h.className=a.settings.selectedOptionClass),c.setAttribute("selected","selected"),a.selectOptions[b].push(h),h.textContent=g,h.addEventListener("click",function(c){a.selectOption(c.target,b)}),a.selectLists[b].appendChild(h)})},h=function(){var c=a.parentNode;c.insertBefore(this.selectButtons[b],a),c.insertBefore(this.selectLists[b],a),a.classList.add(this.settings.hiddenSelectClass)};e.call(this),f.call(this),h.call(this)},toggle:function(a){var b=this.settings.activeListClass,c=this.selectLists[a],d=this.selectButtons[a],e=function(a){"keyup"==a.type&&27!=a.keyCode||a.target==d||g()},f=function(){c.style.left=d.offsetLeft+"px",c.style.top=d.offsetTop+"px",c.classList.add(b),document.addEventListener("click",e),document.addEventListener("keyup",e)},g=function(){c.classList.remove(b),document.removeEventListener("click",e),document.removeEventListener("keyup",e)};c.classList.contains(b)?g():f()},selectOption:function(a,b){this.originalSelects[b].querySelector("[selected]").removeAttribute("selected"),this.originalOptions[b].item(this.selectOptions[b].indexOf(a)).setAttribute("selected","selected"),this.selectButtons[b].textContent=a.textContent,this.selectLists[b].querySelector("."+this.settings.selectedOptionClass).classList.remove(this.settings.selectedOptionClass),a.className=this.settings.selectedOptionClass}};